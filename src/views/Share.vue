<template>    <div @mousedown.stop v-if="!enterPassword">        <n-space vertical>            <n-space vertical justify="center" align="center">                请输入分享密码                <n-input type="password" v-model:value="mainStore.sharePassword"/>            </n-space>            <n-space justify="center">                <n-button @click="getShareFiles">确定</n-button>            </n-space>        </n-space>    </div>    <div v-if="enterPassword" class="file">        <Item v-for="item in mainStore.fileList" :name="item.filename" :id="item.id"              :filetype="item.filetype" :datetime="item.createTime" :isShare="true" :key="item.id"/>    </div></template><script>import {useMainStore} from '@/store'import {onMounted, ref, watch} from 'vue'import {useRoute, useRouter} from 'vue-router'import Item from '@/components/Item'import request from '@/utils/request'import {GetShareURL, ShareFilesURL} from '@/utils/Constant'import {useMessage, NSpace, NInput, NButton} from 'naive-ui'export default {    name: 'Share',    components: {Item, NSpace, NInput, NButton},    setup() {        let mainStore = useMainStore()        let route = useRoute();        let enterPassword = ref(false);        let message = useMessage();        let router = useRouter();        function init(){            mainStore.shareId = route.query.share_id            request.get(GetShareURL + route.query.share_id).then((res) => {                if (res.data.code === 0) {                    enterPassword.value = false                } else {                    message.error(res.data.msg)                    router.push('/file')                }            })        }        function getShareFiles(){            mainStore.operationList = []            request.post(ShareFilesURL + route.query.share_id, {fileId: mainStore.file_id, password: mainStore.sharePassword}).then((res) => {                if (res.data.code === 0) {                    enterPassword.value = true                    mainStore.fileList = res.data.data                    mainStore.breadList = res.data.bread                } else {                    message.error(res.data.msg)                }            })        }        onMounted(() => {            if (route.params.id === undefined) {                mainStore.file_id = 0            } else {                mainStore.file_id = parseInt(route.params.id)            }            init()            mainStore.isShare = true        })        watch(() => route.path, (newVal) => {            let strings = newVal.split('/')            let id = strings[strings.length - 1].split('?')[0]            if (!isNaN(parseInt(id))) {                mainStore.file_id = parseInt(id)                getShareFiles()            }        });        return {            mainStore,            enterPassword,            getShareFiles,        }    }}</script><style scoped>.file {    padding: 20px;    display: flex;    flex-wrap: wrap;    align-content: flex-start;    border-radius: 10px;}</style>